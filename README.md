# Project Structure Parser & Minifier json

**Project Structure Parser & Minifier** — это библиотека для создания структуры вашего проекта, и подготовки кода для использования в чатах с искусственным интеллектом методом минификации json-файлов. Эта библиотека состоит из двух основных скриптов: `build-structure.js` и `minify-code.js`, которые вместе обеспечивают удобный процесс парсинга структуры проекта и работы с его содержимым. Минификация не нарушает структуру кода.
--- 
[example](example.jpg)

---
## Что делает библиотека?

1. **Сканирование структуры проекта** (`build-structure.js`):
   - Позволяет выбрать один из двух режимов:
     - **Полное сканирование**: парсит весь проект с корневой директории, исключая служебные папки (например, `node_modules`, `.git` и т.д.).
     - **Выборочное сканирование**: анализирует только указанные вами файлы и директории.
   - Результат сохраняется в минифицированный JSON-файл `project-structure.min.json`, идеально подходящий для передачи в AI-системы.

2. **Интерактивная минификация файлов** (`minify-code.js`):
   - Использует структуру из `project-structure.min.json` для предоставления интерактивного интерфейса.
   - Позволяет выбрать файлы для минификации с цветным отображением директорий(настраивается в ручную), учётом файлов из `.gitignore` и подсчётом общего количества символов.
   - Если был выбран файл который указан в `.gitignore`, то выводится предупреждение, а так же выбор помечается красным крестом. p.s.: сделанно для предотвращения отправки секретов по типу .env в чаты.
   - В файле project-code.min.json код файла начинается с указания относительного пути этого файла, поэтому чат не будет путаться в структуре(достаточно скинуть только этот файл в чат).
   - Сохраняет содержимое выбранных файлов в минифицированный JSON-файл `project-code.min.json`, оптимизированный для экономии токенов в AI-чатах.
   - Поддерживает сохранение и управление выборками файлов (load/save/delete).

---

## Установка

1. Убедитесь, что у вас установлен Node.js версии 16 или выше.
2. Установите библиотеку через npm:
   ```bash
   npm install project-minifier
   ```
3. Добавьте скрипты в ваш `package.json`:
   ```json
   "scripts": {
     "build-structure": "node bin/build-structure-cli.js",
     "minify-code": "node bin/minify-code-cli.js",
     "all-minifi": "npm run build-structure && npm run minify-code"
   }
   ```

---

## Настройка

Библиотека готова к использованию "из коробки", но вы можете легко настроить её под свои нужды:

### 1. Настройка выборочного парсинга (второй режим в `build-structure.js`)
Если вы выбрали режим "Scan only specified files and directories" (ввод `2`), библиотека парсит только указанные файлы и директории. Настройки находятся в функции `main()` в файле `build-structure.js`:

```javascript
const dirs = ['src', 'server', 'supabase/migrations']; // Указанные директории
const files = ['package.json', 'redis.conf', 'README.md', 'game_readme.md']; // Указанные файлы
```

- **Где менять**: Найдите эти строки внизу файла `build-structure.js` внутри функции `main()`.
- **Совет**: Указывайте пути относительно корня проекта.

### 2. Настройка исключений для полного парсинга (первый режим в `build-structure.js`)
При выборе режима "Scan all project files" (ввод `1`) скрипт парсит весь проект, исключая заданные директории. Список исключений находится в функции `buildStructureJSON` в файле `build-structure.js`:

```javascript
const excludedDirs = [
    'dist', '.github', '.cursor', '.vscode', 'node_modules', 
    '.git', 'docker', 'json-project', 'docs', 'logs'
];
```

- **Где менять**: Найдите массив `excludedDirs` внутри функции `buildStructureJSON`.

---

## Использование

1. **Построение структуры проекта**:
   ```bash
   npm run build-structure
   ```
   - Выберите режим:
     - `1` — полный парсинг с исключениями.
     - `2` — выборочный парсинг указанных файлов и папок.
   - Результат: `json-project/project-structure.min.json`.

2. **Минификация файлов**:
   ```bash
   npm run minify-code
   ```
   - Выберите действие:
     - **Select files to minify**: интерактивный выбор файлов с подсчётом символов.
     - **Load a saved selection**: загрузка сохранённой выборки.
     - **Manage saved selections**: управление выборками (удаление).
     - **Exit**: выход.
   - Используйте `Space` для выбора, `left`/`right` для переключения колонок, `Enter` для подтверждения.
   - Результат: `json-project/project-code.min.json`.

---

## Почему стоит использовать?

- **Гибкость**: Настраиваемые параметры.
- **Интерактивность**: Удобный cli-интерфейс с визуальной обратной связью.
- **Подготовка для AI**: Структурированный JSON и минификация кода для чатов с AI.
- **Эффективность**: Оптимизация данных для экономии места и токенов.
- **Скорость**: Работает быстро и не требует много ресурсов.
- **Выборка файлов**: Вы можете выбрать только нужные файлы и папки.
- **Управление выборками**: Вы можете сохранять(автоматически создаёт папку для сохранений), загружать и удалять выборки.

---

Настройте библиотеку под свои задачи и упрощайте подготовку кода для AI-чатов.